<h1 mat-dialog-title>{{ data.title }}</h1>
<div mat-dialog-content [formGroup]="data.formGroup">
  @for (field of data.fields; track field.name) {
    @if (field.type === 'text' || field.type === 'number' || field.type === 'password') {
      <mat-form-field>
        <mat-label>{{ field.label }}</mat-label>
        <input matInput [type]="field.type" [formControlName]="field.name" />
        <mat-error>This field is required</mat-error>
      </mat-form-field>
    } @else if (field.type === 'textarea') {
      <mat-form-field>
        <mat-label>{{ field.label }}</mat-label>
        <textarea matInput [formControlName]="field.name"></textarea>
        <mat-error>This field is required</mat-error>
      </mat-form-field> 
    } @else if (field.type === 'select') {
      <mat-form-field>
        <mat-label>{{ field.label }}</mat-label>
        <mat-select [formControlName]="field.name">
          @for (option of (field.options ?? []); track option.value) {
            <mat-option [value]="option.value">{{ option.viewValue }}</mat-option>
          }
        </mat-select>
        <mat-error>This field is required</mat-error>
      </mat-form-field>
    } @else if (field.type === 'file') {
      <mat-form-field>
        <mat-label>{{ field.label }}</mat-label>
        <app-mat-file-input [formControlName]="field.name" />
        <mat-error>This field is required</mat-error>
      </mat-form-field>
    } @else {
      NOT_IMPLEMENTED_FIELD {{ field.type }}
    }
  }
</div>
<div mat-dialog-actions>
  <button mat-button (click)="onCancel()">Cancel</button>
  <button mat-button color="primary" (click)="onSave()" [disabled]="!data.formGroup.valid">Save</button>
</div>
